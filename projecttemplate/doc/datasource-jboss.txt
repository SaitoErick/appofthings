#
# Instalando o drive JDBC (MySQL)
#

- Baixar o driver do MySQL;
- Criar a pasta "com/mysql/main" no diretorio %JBOSS_HOME%/modules;
- Extrair e copiar o JAR do drive do MySQL no diretorio criado no passo anterior;
- Criar o arquivo "module.xml" no diretorio %JBOSS_HOME%/modules/com/mysql/main/;
- Incluir o seguinte conteudo no arquivo recem criado:


		<?xml version="1.0" encoding="UTF-8"?>
		<module xmlns="urn:jboss:module:1.0" name="com.mysql">
		  <resources>
		    <resource-root path="mysql-connector-java-5.1.14-bin.jar"/>
		  </resources>
		  <dependencies>
		    <module name="javax.api"/>
		  </dependencies>
		</module>


* OBS: Trocar o "mysql-connector-java-5.1.14-bin.jar" pela versao correspondente, caso necessario;

- Adicionar o seguinte conteudo no arquivo %JBOSS_HOME%/standalone/configuration/standalone.xml, 
no subsistema de datasource (<subsystem xmlns="urn:jboss:domain:datasources:1.0">) na seção de <drivers>.


		<driver name="com.mysql" module="com.mysql">
		  <xa-datasource-class>com.mysql.jdbc.jdbc2.optional.MysqlXADataSource
		  </xa-datasource-class>
		</driver>


#
# Criando o Datasource
# 

No arquivo standalone.xml localizado em %JBOSS_HOME%/standalone/configuration/ 
incluir a seguinte configuração na secao de <datasouces> 
Aqui estão as configurações do datasource: 
 - o nome JNDI usado na aplicação, 
 - URL e driver para conexão com o banco de dados 
 - e as configurações do pool de conexões.

		<?xml version="1.0" encoding="UTF-8"?>
		<datasources>
		  <datasource jta="true" jndi-name="java:/projecttemplateDS" pool-name="projecttemplatePool"
		    enabled="true" use-java-context="true" use-ccm="true">
		    <connection-url>jdbc:mysql://localhost:3306/projecttemplate_schema</connection-url>
		    <driver>com.mysql</driver>
		    <transaction-isolation>TRANSACTION_READ_COMMITTED</transaction-isolation>
		    <pool>
		      <min-pool-size>5</min-pool-size>
		      <max-pool-size>30</max-pool-size>
		      <prefill>true</prefill>
		      <use-strict-min>false</use-strict-min>
		      <flush-strategy>FailingConnectionOnly</flush-strategy>
		    </pool>
		    <security>
		      <user-name>root</user-name>
		      <password>root</password>
		    </security>
		    <statement>
		      <prepared-statement-cache-size>32</prepared-statement-cache-size>
		    </statement>
		  </datasource>
		</datasources>
		
